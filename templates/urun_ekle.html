{% extends "base.html" %}

{% block title %}Yeni Ürün Ekle{% endblock %}

{% block content %}
<div class="row mt-4">
    <div class="col-md-8 mx-auto">
        <div class="card">
            <div class="card-header">
                <h5><i class="bi bi-plus-circle"></i> Yeni Ürün Ekle</h5>
            </div>
            <div class="card-body">
                <form method="POST" id="urunEkleForm">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="urun_adi" class="form-label">
                                    <i class="bi bi-tag"></i> Ürün Adı <span class="text-danger">*</span>
                                </label>
                                <input type="text" class="form-control" id="urun_adi" name="urun_adi" 
                                       required maxlength="200" placeholder="Ürün adını girin...">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="jant_ebati" class="form-label">
                                    <i class="bi bi-circle"></i> Jant Ebatı <span class="text-danger">*</span>
                                </label>
                                <input type="text" class="form-control" id="jant_ebati" name="jant_ebati" 
                                       required maxlength="10" placeholder="örn: 26, 28...">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="mb-3">
                                <label for="desi" class="form-label">
                                    <i class="bi bi-box"></i> Desi (kg)
                                </label>
                                <input type="number" class="form-control" id="desi" name="desi" 
                                       step="0.01" min="0" max="999.99" value="0.00" placeholder="0.00">
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="barkod" class="form-label">
                            <i class="bi bi-upc-scan"></i> Barkod
                        </label>
                        <input type="text" class="form-control" id="barkod" name="barkod" 
                               maxlength="100" value="00" placeholder="Ürün barkodunu girin...">
                        <div class="form-text">
                            Varsayılan değer "00" olarak ayarlanmıştır. İsterseniz değiştirebilirsiniz.
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="aciklama" class="form-label">
                            <i class="bi bi-chat-text"></i> Açıklama (İsteğe bağlı)
                        </label>
                        <textarea class="form-control" id="aciklama" name="aciklama" rows="4" 
                                  maxlength="500" placeholder="Ürün hakkında detaylı bilgi..."></textarea>
                        <div class="form-text">
                            Maksimum 500 karakter
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i>
                        <strong>Bilgi:</strong> Ürün eklendikten sonra stok girişi yaparak depolara stok ekleyebilirsiniz.
                    </div>
                    
                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <a href="{{ url_for('urun_listesi') }}" class="btn btn-secondary">
                            <i class="bi bi-arrow-left"></i> Geri Dön
                        </a>
                        <button type="button" class="btn btn-outline-secondary" onclick="formTemizle()">
                            <i class="bi bi-arrow-clockwise"></i> Temizle
                        </button>
                        <button type="submit" class="btn btn-success">
                            <i class="bi bi-plus-circle"></i> Ürünü Ekle
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h6><i class="bi bi-lightbulb"></i> Ürün Ekleme İpuçları</h6>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>Ürün Adı:</h6>
                        <ul>
                            <li>Açıklayıcı ve benzersiz olmalı</li>
                            <li>Marka, model, renk bilgisi içermeli</li>
                            <li>Maksimum 200 karakter</li>
                        </ul>
                        
                        <h6>Jant Ebatı:</h6>
                        <ul>
                            <li>Standart ebatları kullanın (20, 24, 26, 28)</li>
                            <li>Sadece sayı yazın (inch cinsinden)</li>
                        </ul>
                        
                        <h6>Desi:</h6>
                        <ul>
                            <li>Ağırlık kilogram cinsinden</li>
                            <li>Kargo hesaplamalarında kullanılır</li>
                            <li>Varsayılan 0.00 kg</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6>Barkod:</h6>
                        <ul>
                            <li>Benzersiz olmalı</li>
                            <li>Varsayılan olarak "00" gelir</li>
                            <li>QR kod veya standart barkod olabilir</li>
                        </ul>
                        
                        <h6>Açıklama:</h6>
                        <ul>
                            <li>Teknik özellikler</li>
                            <li>Renk ve özel notlar</li>
                            <li>Tedarikçi bilgileri</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function formTemizle() {
    document.getElementById('urunEkleForm').reset();
    // Form temizlendikten sonra varsayılan değerleri tekrar ayarlayalım
    document.getElementById('barkod').value = '00';
    document.getElementById('desi').value = '0.00';
}

// Barkod alanı için özel işlemler
document.getElementById('urun_adi').addEventListener('input', function() {
    const barkodField = document.getElementById('barkod');
    
    // Eğer barkod alanı boşsa veya sadece "00" varsa, "00" değerini koru
    if (!barkodField.value || barkodField.value === '00') {
        barkodField.value = '00';
    }
});

// Form validation
document.getElementById('urunEkleForm').addEventListener('submit', function(e) {
    const urunAdi = document.getElementById('urun_adi').value.trim();
    const jantEbati = document.getElementById('jant_ebati').value.trim();
    
    if (!urunAdi || !jantEbati) {
        e.preventDefault();
        alert('Ürün adı ve jant ebatı zorunludur!');
        return false;
    }
    
    if (isNaN(jantEbati) || jantEbati <= 0) {
        e.preventDefault();
        alert('Jant ebatı geçerli bir sayı olmalıdır!');
        return false;
    }
});
</script>
{% endblock %}